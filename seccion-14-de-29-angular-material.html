<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
<title>Sección 14 de 29 - Angular Material</title>
</head>

<body>
<header class="text-center">
<h1>Sección 14 de 29 - Angular Material</h1>
</header>
<main class="container">
    <hr />
    <div class="row">
      <div class="col">
        <div class="list-group">
          <a
            href="./index.html"
            class="list-group-item list-group-item-action"
          >
            Volver
          </a>
        </div>
      </div>
    </div>

    <hr>
    
    <section class="row">
      <article class="col">
        <h2>Sección 183 de 404 - Introducción a la Sección</h2>
        
      </article>
    </section>

    <hr>
    
    <section class="row">
      <article class="col">
        <h2>Sección 184 de 404 - Temas puntuales de la seccion</h2>
        
      </article>
    </section>

    <hr>
    
    <section class="row">
      <article class="col">
        <h2>Sección 185 de 404 - Demostración del objetivo de la seccion</h2>
        
      </article>
    </section>

    <hr>
    
    <section class="row">
      <article class="col">
        <h2>Sección 186 de 404 - Continuacion del proyecto - HeroesApp</h2>
        
      </article>
    </section>

    <hr>
    
    <section class="row">
      <article class="col">
        <h2>Sección 187 de 404 - Instalación de angular material y primeflex</h2>
        <pre class="prettyprint">
                
            > ng add @angular/material
            > npm install primeflex
        </pre>
      </article>
    </section>

    <hr>
    
    <section class="row">
      <article class="col">
        <h2>Sección 188 de 404 - Diseño de Login y Auth Layout</h2>
        <pre class="prettyprint">
        
          &ltdiv class="flex flex-column">
          &ltdiv class="text-lg mb-4">Login&lt/div>
        
          &ltmat-form-field>
            &ltmat-label>Usuario&lt/mat-label>
            &ltinput type="text" matInput placeholder="Nombre de usuario">
          &lt/mat-form-field>
        
          &ltmat-form-field>
            &ltmat-label>Constraseña&lt/mat-label>
            &ltinput type="password" matInput placeholder="Constraseña">
          &lt/mat-form-field>
        
          &ltbutton mat-button mat-flat-button color="primary">
            &ltmat-icon>save&lt/mat-icon>
            Ingresar
          &lt/button>
        
          &ltdiv class="flex justify-content-end mt-5">
            &lta routerLink="/auth/new-account">¿Aún no tienes cuenta?&lt/a>
          &lt/div>
        &lt/div>
        
        </pre>

        <pre class="prettyprint">
        
          &ltdiv class="flex flex-column">
          &ltdiv class="text-lg mb-4">Registro&lt/div>
        
          &ltmat-form-field>
            &ltmat-label>Usuario&lt/mat-label>
            &ltinput type="text" matInput placeholder="Nombre de usuario">
          &lt/mat-form-field>
        
          &ltmat-form-field>
            &ltmat-label>Nombre&lt/mat-label>
            &ltinput type="text" matInput placeholder="Nombre de usuario">
          &lt/mat-form-field>
        
          &ltmat-form-field>
            &ltmat-label>Constraseña&lt/mat-label>
            &ltinput type="password" matInput placeholder="Constraseña">
          &lt/mat-form-field>
        
          &ltbutton mat-button mat-flat-button color="primary">
            &ltmat-icon>save&lt/mat-icon>
            Ingresar
          &lt/button>
        
          &ltdiv class="flex justify-content-end mt-5">
            &lta routerLink="/auth/login">¿Ya tienes cuenta?&lt/a>
          &lt/div>
        &lt/div>
        
        </pre>
      </article>
    </section>

    <section class="container">
        <h3>Sección 189 de 404 - Material Sidenav, Toolbar e iconos</h3>
        <pre class="prettyprint">
        
        public sidebarItems = [
          { label: 'Listado', icon: 'label', url: './list' },
          { label: 'Añadir', icon: 'add', url: './new-hero' },
          { label: 'Buscar', icon: 'search', url: './search' },
        ]
        </pre>

        <pre class="prettyprint">
        
          &ltmat-sidenav-container fullscreen>

          &ltmat-sidenav #sidenav mode="push" [ngStyle]="{ width: '250px' }">
            &ltmat-toolbar>
              &ltspan>Menú&lt/span>
              &ltspan class="spacer">&lt/span>
              &ltbutton mat-icon-button (click)="sidenav.toggle()">
                &ltmat-icon>menu&lt/mat-icon>
              &lt/button>
            &lt/mat-toolbar>
        
            &ltmat-nav-list>
              &ltmat-list-item
                *ngFor="let item of sidebarItems"
                [routerLink]="item.url"
                (click)="sidenav.toggle()"
              >
              &ltmat-icon matListItemIcon>{{ item.icon }}&lt/mat-icon>
              {{ item.label }}
            &lt/mat-list-item>
            &lt/mat-nav-list>
          &lt/mat-sidenav>
        
          &ltmat-toolbar color="primary">
            &ltbutton mat-icon-button (click)="sidenav.toggle()">
              &ltmat-icon>menu&lt/mat-icon>
            &lt/button>
        
            &ltspan class="spacer">&lt/span>
        
            &ltbutton mat-button>
              Logout
            &lt/button>
          &lt/mat-toolbar>
        
          &ltdiv class="container">
            &ltrouter-outlet>&lt/router-outlet>
          &lt/div>
        &lt/mat-sidenav-container>
        
        </pre>
    </section>
    <hr>

    <section class="container">
        <h3>Sección 190 de 404 - HEroes Backend - json-server</h3>
        <p>
          <a href="https://gist.githubusercontent.com/Klerith/e09f16f2ae9f6c9ebce6c648fc136072/raw/b20dfde3a88e31b3acd456f92bc856ce311041cb/db.json">db.json</a>
          <br>
          <a href="https://github.com/typicode/json-server">json-server</a>
        </p>
    </section>
    <hr>

    <section class="container">
        <h3>Sección 191 de 404 - Variables de entorno - angular 15+</h3>
        <p>Ahora toca crearlos manualmente y registrarlos en el angular.json</p>
        <pre class="prettyprint">
        
          "configurations": {
            "production": {
              "fileReplacements": [
                {
                  "replace": "src/environments/environments.ts",
                  "with": "src/environments/environments.prod.ts"
                }
              ],
        </pre>
    </section>
    <hr>

    <section class="container">
        <h3>Sección 192 de 404 - HeroesService - Traer información de los héroes</h3>
        <p>Crear las interfaces</p>
        <pre>
          > ng g s heroes/services/heroes
        </pre>

        <pre class="prettyprint">
        
          private baseUrl: string = environments.baseUrl

          constructor(
            private http: HttpClient
          ) { }
        
          getHeroes(): Observable<Hero[]> {
            return this.http.get<Hero[]>(`${ this.baseUrl }/heroes`)
          }
        </pre>

        <pre class="prettyprint">
        
          public heroes: Hero[] = []

          constructor(
            private heroesService: HeroesService
          ) {}
        
          ngOnInit(): void {
            this.heroesService.getHeroes()
              .subscribe( heroes => this.heroes = heroes )
          }
        </pre>
    </section>
    <hr>

    <section class="container">
        <h3>Sección 193 de 404 - Mostrar listado de Héroes</h3>
        <pre class="prettyprint">
        
            > ng g c heroes/components/card
        </pre>

        <pre class="prettyprint">
        
          @Input()
          public hero!: Hero
        
          ngOnInit(): void {
            if (!this.hero) throw Error('Hero property is required')
          }
        </pre>

        <pre class="prettyprint">
        
          &ltmat-card>
          &ltmat-card-header>
            &ltmat-card-title>{{ hero.superhero }}&lt/mat-card-title>
            &ltmat-card-subtitle>{{ hero.alter_ego }}&lt/mat-card-subtitle>
          &lt/mat-card-header>
        
          &lt!-- TODO: image -->
          &ltmat-card-content class="mt-2">
            &lth4>{{ hero.publisher }}&lt/h4>
            &ltp>
              &ltstrong>Primera aparición&lt/strong> {{ hero.first_appearance }}
              &ltbr>
              &ltmat-chip-listbox>
                &ltmat-chip *ngFor="let character of hero.characters.split(', ') | slice:0:3">
                  {{ character }}
                &lt/mat-chip>
              &lt/mat-chip-listbox>
            &lt/p>
          &lt/mat-card-content>
        
          &ltmat-divider>&lt/mat-divider>
        
          &ltmat-card-actions>
            &ltbutton mat-button mat-raised color="primary" [routerLink]="['/heroes/edit', hero.id]">
              &ltmat-icon>edit&lt/mat-icon>
              Editar
            &lt/button>
        
            &ltspan class="spacer">&lt/span>
        
            &ltbutton mat-button mat-raised [routerLink]="['/heroes', hero.id]">
              &ltmat-icon>more-horiz&lt/mat-icon>
              Más
            &lt/button>
        
        
          &lt/mat-card-actions>
        &lt/mat-card>        
        </pre>

        <pre class="prettyprint">
        
          &lth1>Listado de Heroes&lt/h1>

          &ltmat-divider>&lt/mat-divider>
          
          &ltdiv class="grid bm-8 pt-2">
          
            &ltdiv
              *ngFor="let hero of heroes"
              class="col-12 sm:col-4 md:col-3 xl:col-2">
              &ltheroes-hero-card [hero]="hero">&lt/heroes-hero-card>
            &lt/div>
          &lt/div>
          
        </pre>
    </section>
    <hr>

    <section class="container">
        <h3>Sección 194 de 404 - HeroImage Pipe</h3>
        <pre class="prettyprint">
                
          > ng g pipe heroes/pipes/heroImage
        </pre>

        <pre class="prettyprint">
                
          transform(hero: Hero): string {
            if ( !hero.id && !hero.alt_img) {
              return 'assets/no-image.png';
            }
        
            if (hero.alt_img) return hero.alt_img
        
            return `assets/heroes/${ hero.id }.jpg`
          }
        </pre>

        <pre class="prettyprint">
                
          &ltimg mat-card-image [src]="hero | heroImage" [alt]="hero.superhero">
        </pre>
    </section>
    <hr>

    
    <section class="row">
      <article class="col">
        <h2>Sección 195 de 404 - Obtener Heroe por URL</h2>
        <pre class="prettyprint">
                
          getHeroeById(id: string): Observable<Hero | undefined> {
            return this.http.get<Hero>(`${ this.baseUrl }/heroes/${ id }`)
              .pipe(
                catchError( error => of(undefined))
              )
          }
        </pre>

        <pre class="prettyprint">
                
          public hero?: Hero

          constructor(
            private heroesService: HeroesService,
            private activatedRoute: ActivatedRoute,
            private router: Router
          ) {}
        
          ngOnInit() {
            this.activatedRoute.params
              .pipe(
                switchMap( ({ id }) => this.heroesService.getHeroeById( id ))
              )
              .subscribe( hero => {
                if (!hero) return this.router.navigate([ '/heroes/list' ])
                this.hero = hero
                console.log({ hero })
                return
              })
          }
        </pre>
      </article>
    </section>

    <hr>
    
    <section class="row">
      <article class="col">
        <h2>Sección 196 de 404 - Página del Heroe</h2>
        <pre class="prettyprint">
                
          &ltng-template #divLoading>
          &ltmat-grid-list cols="1">
            &ltmat-grid-tile>
              &ltmat-spinner>&lt/mat-spinner>
            &lt/mat-grid-tile>
          &lt/mat-grid-list>
        &lt/ng-template>
        
        &ltdiv *ngIf="hero; else divLoading" class="grid p-2">
          &ltmat-card class="col-12 sm:col-6">
            &ltmat-card-header>
              &ltmat-card-title>{{ hero.alter_ego }}&lt/mat-card-title>
              &ltmat-card-subtitle>{{ hero.superhero }}&lt/mat-card-subtitle>
            &lt/mat-card-header>
        
            &ltimg [src]="hero | heroImage" [alt]="hero.superhero" mat-card-image />
          &lt/mat-card>
        
          &ltmat-card class="col-12 sm:col-6">
            &ltmat-card-header>
              &ltmat-card-title>Información&lt/mat-card-title>
              &ltmat-card-subtitle>{{ hero.superhero }}&lt/mat-card-subtitle>
            &lt/mat-card-header>
        
            &ltmat-card-content>
              &ltmat-list>
                &ltmat-list-item>{{ hero.first_appearance }}&lt/mat-list-item>
                &ltmat-list-item>{{ hero.characters }}&lt/mat-list-item>
                &ltmat-list-item>{{ hero.publisher }}&lt/mat-list-item>
                &ltmat-list-item>{{ hero.alter_ego }}&lt/mat-list-item>
              &lt/mat-list>
        
              &ltbutton
                mat-button
                color="warn"
                (click)="goBack()"
              >
                Regresar
              &lt/button>
            &lt/mat-card-content>
          &lt/mat-card>
        &lt/div>
        
        </pre>
      </article>
    </section>

    <hr>
    
    <section class="row">
      <article class="col">
        <h2>Sección 197 de 404 - Angular Material Autocomplete</h2>
        <pre class="prettyprint">
                
          getSuggestions(query: string): Observable<Hero[]> {
            return this.http.get<Hero[]>(`${ this.baseUrl }/heroes?q=${ query }&limit=6`)
          }
        </pre>

        <pre class="prettyprint">
                
          &ltdiv class="flex flex-column p-2">

          &lth3>Buscador&lt/h3>
        
          &ltmat-form-field>
            &ltmat-label>Buscador de héroes&lt/mat-label>
            &ltinput type="text" matInput [formControl]="searchInput">
          &lt/mat-form-field>
        
        &lt/div>
        
        </pre>

        <pre class="prettyprint">
        
          public searchInput = new FormControl('')
        </pre>

        <p>NOTE: Import ReactiveFormsModule</p>
      </article>
    </section>

    <hr>
    <section class="container">
      <h3>Sección 198 de 404 - Angular Material - Autocomplete parte 2</h3>
      <pre class="prettyprint">
      
        &ltdiv class="flex flex-column p-2">

        &lth3>Buscador&lt/h3>
      
        &ltmat-form-field>
          &ltmat-label>Buscador de héroes&lt/mat-label>
          &ltinput type="text" matInput [formControl]="searchInput" (input)="searchHero()" [matAutocomplete]="auto">
        &lt/mat-form-field>
      
        &ltmat-autocomplete autoActiveFirstOption #auto="matAutocomplete" (optionSelected)="onSelectedOption( $event )">
          &ltmat-option *ngFor="let hero of heroes" [value]="hero">
            {{ hero.superhero }}
          &lt/mat-option>
      
          &ltmat-option
          *ngIf="heroes.length === 0 && searchInput.value && searchInput.value.length > 0"
          value="">
            No se encontró nada con el término {{ searchInput.value }}
          &lt/mat-option>
        &lt/mat-autocomplete>
      
        {{ selectedHero | json }}
      
      &lt/div>
      
      </pre>

      <pre class="prettyprint">
      
        public searchInput = new FormControl('')
        public heroes: Hero[] = []
        public selectedHero?: Hero;
      
        constructor(
          private heroesService: HeroesService
        ) { }
      
        searchHero() {
          const value: string = this.searchInput.value || ''
          this.heroesService.getSuggestions(value)
            .subscribe(heroes => this.heroes = heroes)
        }
      
        onSelectedOption(event: MatAutocompleteSelectedEvent) {
          if (!event.option.value) {
            this.selectedHero = undefined
            return
          }
      
          const hero: Hero = event.option.value
          this.searchInput.setValue( hero.superhero )
      
          this.selectedHero = hero
      
        }
      </pre>
    </section>
    <hr>

    <section class="container">
        <h3>Sección 199 de 404 - Agregar Héroe - HTML</h3>
        <pre class="prettyprint">
        
          &lth1>
          Editar / Agregar
          héroe
          &ltsmall>Superman&lt/small>
        &lt/h1>
        
        &ltmat-divider class="mb-2">&lt/mat-divider>
        
        &ltdiv class="grid">
        
          &ltdiv class="col-12 sm:col-6">
            &ltmat-card>
              &ltmat-card-content>
        
                &ltdiv class="grid">
        
                  &ltmat-form-field class="col-12 sm:col-6">
                    &ltmat-label>Super héroe&lt/mat-label>
                    &ltinput
                      matInput
                      type="text"
                      required
                    />
                  &lt/mat-form-field>
        
                  &ltmat-form-field class="col-12 sm:col-6">
                    &ltmat-label>Alter ego&lt/mat-label>
                    &ltinput
                      matInput
                      type="text"
                      required
                    />
                  &lt/mat-form-field>
        
        
                  &ltmat-form-field class="col-12">
                    &ltmat-label>Primera aparición&lt/mat-label>
                    &ltinput
                      matInput
                      type="text"
                      required
                    />
                  &lt/mat-form-field>
        
                  &ltmat-form-field class="col-12">
                    &ltmat-label>Personajes&lt/mat-label>
                    &ltinput
                      matInput
                      type="text"
                      required
                    />
                  &lt/mat-form-field>
        
                  &ltmat-form-field class="col-12">
                    &ltmat-label>Creador&lt/mat-label>
                    &ltmat-select required="">
                      &ltmat-option *ngFor="let publisher of publishers"
                        [value]="publisher.id">
                        {{ publisher.desc }}
                      &lt/mat-option>
                    &lt/mat-select>
                  &lt/mat-form-field>
                &lt/div>
        
                &ltdiv class="flex justify-content-between">
                  &ltbutton
                    mat-flat-button
                    color="warn"
                  >
                    Borrar
                  &lt/button>
        
                  &ltbutton
                    mat-flat-button
                    color="primary"
                  >
                    &ltmat-icon>save&lt/mat-icon>
                    Guardar
                  &lt/button>
                &lt/div>
        
              &lt/mat-card-content>
            &lt/mat-card>
          &lt/div>
        
          &ltdiv class="col-12 sm:col-6">
        
            &ltmat-card>
              &ltimg src="" alt="imagen del héroe" mat-card-image>
            &lt/mat-card>
        
          &lt/div>
        &lt/div>
        
        
        </pre>
        <pre class="prettyprint">
        
        public publishers = [
          { id: 'DC Comics', desc: 'DC - Comics' },
          { id: 'Marvel Comics', desc: 'Marvel - Comics' },
        ];
        </pre>
    </section>
    <hr>

    <section class="container">
        <h3>Sección 200 de 404 - Código fuente de la sección</h3>
        <p>
          <a href="https://github.com/Klerith/angular-heroes-app/tree/fin-seccion-14">https://github.com/Klerith/angular-heroes-app/tree/fin-seccion-14</a>
        </p>
    </section>
    <hr>











</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>

</html>