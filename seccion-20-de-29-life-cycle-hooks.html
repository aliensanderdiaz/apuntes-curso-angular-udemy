<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <title>Sección 20 de 29 - LifeCycle Hooks</title>
  </head>

  <body>
    <header class="text-center">
      <h1>Sección 20 de 29 - LifeCycle Hooks</h1>
    </header>
    <main class="container">
      <hr />

      <div class="row">
        <div class="col">
          <div class="list-group">
            <a
              href="./index.html"
              class="list-group-item list-group-item-action"
            >
              Volver
            </a>
          </div>
        </div>
      </div>

      <hr />

      <section class="row">
        <article class="col">
          <h2>Sección 270 de 404 - Introducción a la sección</h2>
        </article>
      </section>

      <hr />

      <section class="row">
        <article class="col">
          <h2>Sección 271 de 404 - Temas de la sección</h2>
        </article>
      </section>

      <hr>
      
      <section class="row">
        <article class="col">
          <h2>Sección 272 de 404 - Inicio del proyecto lifecycle</h2>
          <pre class="prettyprint">
                  
            > ng new lifecycle
            > ng g m products --module app --routing
            > ng g c products/pages/product
            > ng g c products/components/price
          </pre>
        </article>
      </section>

      <hr>
      
      <section class="row">
        <article class="col">
          <h2>Sección 273 de 404 - Implementar todos los lifecycle hooks</h2>
          <p>
            <a href="https://angular.io/guide/lifecycle-hooks">https://angular.io/guide/lifecycle-hooks</a>
          </p>

          <pre class="prettyprint">
                  
            export class ProductComponent
            implements
              OnInit,
              OnChanges,
              DoCheck,
              AfterContentInit,
              AfterContentChecked,
              AfterViewInit,
              AfterViewChecked,
              OnDestroy
          {
          
            public isProductVisible: boolean = true
          
            constructor() {
              console.log('constructor');
            }
          
            ngOnInit(): void {
              console.log('ngOnInit');
            }
          
            ngOnChanges(changes: SimpleChanges) {
              console.log('ngOnChanges');
              console.table({ changes })
            }
          
            ngDoCheck() {
              console.log('ngDoCheck');
            }
          
            ngAfterContentInit() {
              console.log('ngAfterContentInit');
            }
          
            ngAfterContentChecked() {
              console.log('ngAfterContentChecked');
            }
          
            ngAfterViewInit() {
              console.log('ngAfterViewInit');
            }
          
            ngAfterViewChecked() {
              console.log('ngAfterViewChecked');
            }
          
            ngOnDestroy() {
              console.log('ngOnDestroy');
            }
          }
          </pre>

          <pre class="prettyprint">
                  
            > &ltbutton (click)="isProductVisible = !isProductVisible">Toggle&lt/button>
          </pre>
        </article>
      </section>

      <hr>
      
      <section class="row">
        <article class="col">
          <h2>Sección 274 de 404 - ngOnChanges</h2>
          <pre class="prettyprint">
                  
            export class PriceComponent implements OnInit, OnChanges, OnDestroy {
              @Input()
              price: number = 0;
            
              ngOnInit() {
                console.log('PRICE - OnInit');
              }
            
              ngOnChanges(changes: SimpleChanges) {
                console.log('PRICE - OnChanges');
                console.table({ component: 'price', changes });
              }
            
              ngOnDestroy() {
                console.log('PRICE - OnDestroy');
              }
            }
            
          </pre>

          &ltp>
          Price {{ price | currency }}
        &lt/p>
        </article>

        <pre class="prettyprint">
                
          public isProductVisible: boolean = false
          public currentPrice: number = 5000

          ...

          increasePrice() {
            this.currentPrice += 1000
          }
        </pre>

        <pre class="prettyprint">
                

          &ltproducts-price *ngIf="isProductVisible" [price]="currentPrice">&lt/products-price>

          &ltbutton (click)="isProductVisible = !isProductVisible">Toggle&lt/button>
          &ltbutton (click)="increasePrice()">Incrementar Precio&lt/button>
          
        </pre>
      </section>

      <hr>
      
      <section class="row">
        <article class="col">
          <h2>Sección 275 de 404 - ngOnDestroy</h2>
          <pre class="prettyprint">
                  
            public intervals$?: Subscription

            ngOnInit() {
              console.log('PRICE - OnInit');
          
              this.intervals$ = interval(1000).subscribe( value => console.log(`Tick: ${ value }`))
            }
          
            ngOnChanges(changes: SimpleChanges) {
              console.log('PRICE - OnChanges');
              console.table({ component: 'price', changes });
            }
          
            ngOnDestroy() {
              console.log('PRICE - OnDestroy');
              this.intervals$?.unsubscribe()
            }
          </pre>
        </article>
      </section>

      <hr>
      
      <section class="row">
        <article class="col">
          <h2>Sección 276 de 404 - Más información sobre el ciclo de vida</h2>
          
        </article>
      </section>

      <hr>
      
      <section class="row">
        <article class="col">
          <h2>Sección 277 de 404 - Codigo fuente de la sección</h2>
          <p>
            <a href="https://github.com/Klerith/angular-lifecycle-hooks">https://github.com/Klerith/angular-lifecycle-hooks</a>
          </p>
          
        </article>
      </section>
    </main>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
